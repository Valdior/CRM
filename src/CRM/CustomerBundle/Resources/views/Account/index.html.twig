{% extends "CRMCustomerBundle::layout.html.twig" %}

{% block title %}Accueil - {{ parent() }}{% endblock %}

{% block accountbody %}                 
<div id="toolbar" class="btn-group">
    <a href="{{ path('crm_account_add') }}" class="btn btn-default">
        <i class="glyphicon glyphicon-plus"></i>
    </a>
    <a href="" class="btn btn-default">
        <i class="glyphicon glyphicon-trash"></i>
    </a>
</div>  
   
<table data-toggle="table"
       data-url="{{ path('api_get_accounts') }}"       
       data-click-to-select="true"
       data-search="true"
       data-show-refresh="true"
       data-show-toggle="true"
       data-show-columns="true"
       data-pagination="true"
       data-sort-name="name"
       data-sort-order="asc"
       data-toolbar="#toolbar">
    <thead>
        <tr>
            <th data-field="state" data-checkbox="true"></th>
            <th data-field="name"  data-sortable="true">Nom</th>
            <th data-field="adresse" data-sortable="true" data-visible="false">Adresse</th>
            <th data-field="contact" data-sortable="true" data-visible="false">Contact</th>
            <th data-field="siteWeb" data-sortable="true">Site Web</th>
            <th data-field="tVA" data-sortable="true" data-visible="false">T.V.A</th>
            <th data-field="phone" data-sortable="true">Téléphone</th>
            <th data-field="fAX" data-sortable="true">FAX</th>
            <th data-field="action" data-formatter="actionFormatter" data-events="actionEvents">Action</th>
        </tr>
    </thead>
</table>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    
<script>
    function actionFormatter(value, row, index) {
    return [
        '<a class="like" href="javascript:void(0)" title="View">',
        '<i class="fa fa-fw fa-eye"></i>',
        '</a>',
        '<a class="edit ml10" href="javascript:void(0)" title="Edit">',
        '<i class="fa fa-fw fa-edit"></i>',
        '</a>',
        '<a class="remove ml10" href="javascript:void(0)" title="Remove">',
        '<i class="fa fa-fw fa-remove"></i>',
        '</a>'
    ].join('');
}

window.actionEvents = {
    'click .like': function (e, value, row, index) {
        alert('You click like icon, row: ' + JSON.stringify(row));
        console.log(value, row, index);
    },
    'click .edit': function (e, value, row, index) {
        alert('You click edit icon, row: ' + JSON.stringify(row));
        console.log(value, row, index);
    },
    'click .remove': function (e, value, row, index) {
        alert('You click remove icon, row: ' + JSON.stringify(row));
        console.log(value, row, index);
        
    }
};
</script>
    {% endblock %}